# Mysql

```
修改字段
ALTER TABLE `car`.`car_wash` MODIFY COLUMN `status` int(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '状态 1使用 0停用' AFTER `introduce`;
```

# 常用 vue 代码

```
getSortClass: function(key) {
const sort = this.listVehicleQuery.sort
return sort === `+${key}` ? 'ascending' : 'descending'
},

<el-table-column label="ID" prop="id" sortable="custom" align="center" width="80" :class-name="getSortClass('id')">
<template slot-scope="{row}">
  <span>{{ row.id }}</span>
</template>
</el-table-column>

sortByID(order) {
if (order === 'ascending') {
  this.listVehicleQuery.sort = '+id'
} else {
  this.listVehicleQuery.sort = '-id'  =
  ‘
}
this.handleFilter()
},

//  设置浏览器标签标题
 document.title = `${title} - ${this.product.display_name}`

 // 格式化json
   formatJson(filterVal) {
    return this.list.map(v => filterVal.map(j => {
      if (j === 'timestamp') {
        return parseTime(v[j])
      } else {
        return v[j]
      }
    }))
  },


// 遍历数组
this.fileList = this.fileList.map(function(item,key){
    return {
    "name":"图片"+key,
    "url":item
    }
})

// 放大图
<img :src="row.cover" style="width:130px;" @click="showImage(row.cover)" />
enlargedView: false,
showImage(url) {
	this.centerDialogVisible = true
	this.enlargedView = url
},
<el-dialog title="封面" :visible.sync="centerDialogVisible" lock-scroll width="50%" top="2%">
  <span>
	<img :src="enlargedView" width="80%" style="display: block;margin:0 auto">
  </span>
  <span slot="footer" class="dialog-footer">
	<el-button @click="centerDialogVisible = false">取 消</el-button>
	<el-button type="primary" @click="centerDialogVisible = false">确 定</el-button>
  </span>
</el-dialog>

// 无限级，多选
import {
  getCarTreeByLevel
} from '@/api/car'
<el-form-item label="年份" prop="year">
  <el-cascader v-model="temp.cy_id" :props="year" :clearable="true" />
</el-form-item>
year: {
	checkStrictly:true,
	multiple:true,
	lazy: true,
	lazyLoad(node, resolve) {
	  const {
		level
	  } = node // nodex 节点,resolve 回调
	  setTimeout(() => {
		getCarTreeByLevel({
		  level: level,
		  id: node.value
		}).then((response) => {
		  if (response.data) {
			const data = response.data
			// console.log(data)
			const nodes = Array.from(data).map(item => ({
			  value: item.value,
			  label: item.label,
			  leaf: level >= 3
			}))
			// console.log(nodes)
			resolve(nodes)
		  }
		})
	  }, 1000)
	}
  },

  // vue 绑定值与字符串拼接
  :title="`字符串${xx}`"
  :title="'字符串' + xx"
```

# 命名：

```
options 数组
value:字符串/数字
get
set
updateData : 执行更新方法(method)
createData : 执行创建方法(method)
handleUpdate : 执行更新视图操作
handleCreate : 执行创建视图操作
```

# linux

```
// 开机启动
chkconfig redis on
chkconfig --list redis
```

# 工作记录

```

工作内容
2020年4月23日
更改产品添加/编辑接口
产品添加/编辑功能单独页面，增加符文本
增加用户优惠券接口
增加用户账单接口
添加用户地址表
添加用户钱包接口
添加用户提现接口
添加优惠券管理接口 coupon

2020年4月26日
修改洗车管理详情编辑页面
修改洗车详情，编辑接口
修改轮胎管理编辑功能，添加轮胎管理编辑页面
修改轮胎编辑,详情接口
添加文章管理接口

2020年4月27日
走通产品上线流程
1.添加分类
2.添加车款
3.添加产品
4.车-产品适配
测试产品管理，车管理，轮胎管理，洗车管理等页面功能，并修改相对接口

2020年4月28日
交付测试版后台给零零空 （已沟通）
优化后台页面 （待定）
测试功能 （待定）
轮胎管理，洗车管理等页面的封面图片添加放大功能 （完成）
后台添加排序功能 （完成）
修改产品-车型适配单选为多选且不限层级 （完成）
添加优惠券分组数据表 （完成）

2020年4月29日
去除重复到435687
添加后台管理员操作日志
提现添加审核
轮胎，洗车添加排序，隐藏内容展示
提现列表删除报错 待检查
检查所有的删除接口，添加确认提示
1.员工管理删除
2.优惠券管理删除
3.活动管理删除
4.订单管理删除
5.用户管理删除
6.洗车管理删除
7.车品牌管理删除
8.车系管理删除
9.保养分类删除
10.产品管理删除
11.优惠券列表删除
12.优惠券分组删除

2020年4月30日
修改优惠券添加页面
修改发表文章

2020年5月6日
员工表添加部门字段 （完成）
员工表添加录入功能 （完成）
员工管理添加微信绑定复制 （完成）
员工签到记录（待定）
员工任务记录（待定）
订单评价列表（审核，删除）
接送服务地址（待定）

2020年5月7日
1.“产品编辑”，“洗车编辑”，“轮胎编辑”功能添加市场价，默认数量字段
2.配合宝哥，添加测试数据
3.“保养分类”数据表添加“是否固定产品包”字段
4.修改“添加保养分类”接口添加“是否固定产品包”字段
5.爬取途虎移动端商品数据

2020年5月8日
1.整理商品数据
2.添加商品管理接口
3.添加商品分类管理接口
4.合并产品，洗车，轮胎数据到商品表
5.爬取商品详情

2020年5月11日
权限分配管理，角色分配管理

2020年5月12日
权限管理数据整理
接口修改，测试

2020年5月13日
商品编辑删除保养分类
商品列表-添加车型-添加保养分类
权限管理
车款式，车年份-跳转产品失败

2020年5月14日
保养分类重新整理
保养分类添加工时费等信息
整理并添加权限管理等数据


2020年5月15日
保养分类添加，父级保养分类修改为层联选择器 （完成）
保养分类列表修改为单层数据展示 （完成）
商品分类，添加默认封面图 （完成）
管理后台页面修改权限功能展示隐藏
订单评价列表（完成）
订单详情列表
订单接送服务地址列表
优惠券接口修改
权限角色分配测试

2020年5月16日
文章添加分类id
文章添加适配商品
添加爱车档案

2020年5月18日
与零零空沟通上传商品
商品列表-删除功能添加删除确认操作
添加“根据商品名称搜索商品列表”接口
文章管理-发表文章接口添加商品选择，文章分类字段
商城分类隐藏
商品添加“商城是否显示”字段
商品价格*1.5倍
商品管理-产品分配添加“选择全部车型”

2020年5月19日
添加“用户车辆管理”接口
整理“车+” 1.0版本商品，用户，订单数据
修改文章添加接口，添加“是否视频”，“视频链接”字段


2020年5月20日
导入“车+” 1.0版本商品，用户，订单数据
添加车辆保养详情列表接口
添加版本解释界面
测试优化“匹配车型”队列处理
优化商品列表页面数据查询速度

2020年5月21日
商品-车适配列表添加保养分类字段
[商品管理-商品列表]修改"添加适配"为"编辑适配"，并添加"删除适配车型"功能

2020年5月22日
接入非登录版“秀米”
保养分类添加排序

2020年5月25日
修改接口查看详情增加更换机油（机油分类不做匹配，查询所有机油分类）
添加“所属门店”字段，并修改相关接口，页面
修改“商品，文章，活动”等相关图片，链接为https

2020年5月26日
修改门店接口，添加门店与用户关联
开发门店专属邀请码接口
修改门店功能页面
研究当当数据结构

2020年5月27日
开发当当爬取页面数据程序
提取当当数据页面信息
保存数据图书数据

2020年5月28日
测试门店邀请码功能
上传分享活动h5页面
后台添加订单监听页面

2020年5月29日
添加员工分组功能
修改商品价格为初始价格的1.2倍

2020年6月1日
用户登录自动请求邀请码
爬取当当数据

2020年6月2日
修改添加用户不需要选择门店
小程序保养分类排序
添加保养洗车商品并匹配
洗车轮胎弄到定制服务
员工添加照片字段
商品管理添加是否首页显示

2020年6月3日
订单统计：时间筛选，总金额
门店统计：用户，订单，总金额，状态统计

2020年6月4日
上商品
优化管理后台功能
对比商品价格
整理数据

2020年6月5日
拼团时间：手动设置（默认24小时），超时退回，定时器执行
后台设置拼团商品
手动设置价格
每个商品人数团不一样，手动设置

2020年6月8日
团购功能开发

2020年6月9日
团购功能测试，团购功能后台管理开发

2020年6月10日
商品列表添加是否首页显示搜索
商品详情返回团购信息（价格，拼团人数，拼团购买数量上限）

拼团详情接口
商品id，商品名称，商品标题，商品已被拼团数量，价格，拼团价格，剩余拼团名额，已拼团用户头像/id/昵称，拼团剩余时间
8456不能开团

2020年6月11日
消费过后不能更改邀请人
检查邀请码是否有效

2020年6月12日
配合车家小程序功能迭代

2020年6月15日
开发调查问卷接口

2020年6月16日
测试调查问卷功能，开发导出数据功能

2020年6月17日
调查问卷添加返回问卷结果信息

2020年6月18日
调整车架后台管理系统-车辆保养分类的可编辑参数
测试调查问卷管理后台，数据提交功能

2020年6月19日
整理酷家乐需要爬取数据信息
调查问卷添加密码功能

2020年6月22日
后台添加订单功能
授权跳转链接
请求用户信息（code获取用户信息）
完善订单信息
提交订单（车型，联系人，联系方式，联系地址）

2020年6月23日
修改调查问卷手机号码验证规则

2020年6月24日
配置测试服务器项目环境
配置测试公众号信息

2020年6月28日
优惠券流程（返回优惠券列表）
自定义订单支付

2020年6月29日
商品添加优惠券
删除保养分类以及相关商品关系

2020年6月30日
保养分类添加优惠券
优化删除保养分类以及相关商品关系

2020年7月1日
后台管理系统生成订单二维码
测试并优化门店二维码功能


2020年7月2日
优化‘完善订单用户信息接口’
修改车+小程序活动列表接口，完善排序功能
修改后台管理系统添加订单功能，添加联系人等信息
测试后台生成订单，发送给用户等流程操作
测试添加优惠券，发送给用户领取流程操作

2020年7月3日
测试员工端流程并修改相关接口数据信息
1.修改员工分组接口，按分组返回员工数据
2.修改分配订单到员工分组接口

2020年7月6日
“保养分类”设置工时费，中高低三个等级
“车品牌”添加“等级”字段
修改优惠券，添加“首页领取”字段
用户列表添加“查看下级用户”功能
“订单列表”展开订单状态查询
```
